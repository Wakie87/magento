<?php
return [
  'backend' => ['frontName' => getenv('MAGE_ADMIN_URI') ?: 'admin'],
  'crypt'   => ['key' => getenv('MAGE_CRYPT_KEY') ?: ''],
  'db' => [
    'table_prefix' => getenv('DB_TABLE_PREFIX') ?: '',
    'connection' => ['default' => [
      'host' => getenv('DB_HOST') ?: '127.0.0.1',
      'dbname' => getenv('DB_NAME') ?: '',
      'username' => getenv('DB_USER') ?: '',
      'password' => getenv('DB_PASS') ?: '',
      'model' => 'mysql4', 'engine' => 'innodb', 'active' => '1',
    ]],
    'resources' => ['default_setup' => ['connection' => 'default']],
  ],
  'session' => ['save' => getenv('SESSION_SAVE') ?: 'files'],
  'cache' => ['frontend' => [
    'default' => ['backend' => getenv('CACHE_BACKEND') ?: 'Cm_Cache_Backend_Redis','backend_options' => [
      'server' => getenv('REDIS_HOST') ?: '127.0.0.1','port' => (int)(getenv('REDIS_PORT') ?: 6379),'database' => (int)(getenv('REDIS_DB') ?: 0),'compress_data' => '1',
    ]],
    'page_cache' => ['backend' => getenv('PAGECACHE_BACKEND') ?: 'Cm_Cache_Backend_Redis','backend_options' => [
      'server' => getenv('REDIS_HOST') ?: '127.0.0.1','port' => (int)(getenv('REDIS_PORT') ?: 6379),'database' => (int)(getenv('REDIS_PAGECACHE_DB') ?: 1),'compress_data' => '0',
    ]],
  ]],
  'search' => [
    'engine' => getenv('SEARCH_ENGINE') ?: 'elasticsearch7',
    'elasticsearch7_server_hostname' => getenv('OPENSEARCH_HOST') ?: '127.0.0.1',
    'elasticsearch7_server_port' => (int)(getenv('OPENSEARCH_PORT') ?: 9200),
    'elasticsearch7_index_prefix' => getenv('OPENSEARCH_PREFIX') ?: 'magento2',
  ],
  'queue' => ['amqp' => [
    'host' => getenv('RABBITMQ_HOST') ?: '',
    'port' => (int)(getenv('RABBITMQ_PORT') ?: 5672),
    'user' => getenv('RABBITMQ_USER') ?: '',
    'password' => getenv('RABBITMQ_PASS') ?: '',
    'virtualhost' => getenv('RABBITMQ_VHOST') ?: '/',
  ]],
  'MAGE_MODE' => getenv('MAGE_MODE') ?: 'production',
];
